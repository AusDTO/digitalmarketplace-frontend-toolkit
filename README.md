# Digital Marketplace front-end toolkit

A toolkit for design patterns used across Digital Marketplace projects.

## Using the design patterns

**The patterns can be previewed at [alphagov.github.io/digitalmarketplace-frontend-toolkit/](http://alphagov.github.io/digitalmarketplace-frontend-toolkit/)**

Each pattern provides:
- A template (in Jinja)
- SASS
- Javascript (if needed)
- Images (if needed)

Dependency management and integrating these files into a build pipeline are the
concern of each project that uses them.

## Working on the documentation

The documentation is generated from the contents of this repository and
published as static HTML to Github Pages. Creating a new pattern means creating:
- a file of example data
- a template
- some SASS

### Example data

Examples of each pattern are defined in the `./pages_builder/pages` folder. They
are YAML files which show what parameters you can pass to a template. The
examples in the documentation are generated from these files.

### Templates

Templates are found in the `./toolkit/templates` folder. Their naming matches
the naming of the example markup files. They will be rendered once for each of
the provided examples, using the provided examples' data.

### SASS

The SASS compilation takes files from `./toolkit/scss` and renders CSS files in
`./pages/public/stylesheets`.

The `./toolkit/scss`, `./pages_builder/govuk_frontend_toolkit/stylesheets` and
`./pages_builder/assets/scss` folders are included in the load path so you can
import any files from them.

## Running the documentation locally

The documentation pages can be generated by following these steps.

### Requirements

- Python
- [PIP](https://pip.pypa.io/en/latest/)
- [virtualenv](https://virtualenv.pypa.io/en/latest/)

### Set up a virtualenv

To set up an isolated environment for the project, run these commands:

``` shell
virtualenv ~/Envs/digitalmarketplace-frontend_toolkit
source ~/Envs/digitalmarketplace-frontend_toolkit/bin/activate
```

*Note*: you can set the virtualenv to any location on your system by swapping
out `~/Envs/digitalmarketplace-frontend_toolkit` to your choice of folder.

### Install the dependencies

``` shell
pip install -r ./pages_builder/requirements.txt
```

### Generate the pages

To generate the pages, run
``` shell
python pages_builder/generate_pages.py
```

If the root directory of your web server does not correspond to `./pages` then
you need to set an optional environment variable before running the above,
eg:
``` shell
export ROOT_DIRECTORY='/digitalmarketplace-frontend-toolkit'
```

### Run the server

``` shell
cd pages
python -m SimpleHTTPServer
```
â€¦then visit http://localhost:8000 to see the documentation

### Overwrite the documentation on Github Pages with your local copy

_Only Jenkins or similar should be performing this step_

``` shell
sh build_tools/push_to_github_pages.sh
```

## Versioning

Releases of this project follow [semantic versioning](http://semver.org/), ie
> Given a version number MAJOR.MINOR.PATCH, increment the:
>
> - MAJOR version when you make incompatible API changes,
> - MINOR version when you add functionality in a backwards-compatible manner, and
> - PATCH version when you make backwards-compatible bug fixes.

To make a new version:
- update `VERSION.txt` with the new version number
- commit this change; the first line of the commit message **must** be in the
  format `Bump version to X.X.X`
- create a pull request for the version bump

When the pull request is merged [a Jenkins job](http://37.26.90.26:8080/job/Add%20release%20tag%20to%20toolkit/)
is run which tags the new version.
